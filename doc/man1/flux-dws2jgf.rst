===============
flux-dws2jgf(1)
===============


SYNOPSIS
========

**flux** **dw2jgf** [*OPTIONS*] [PATH]


DESCRIPTION
===========

:program:`flux dws2jgf` generates and prints a Fluxion JGF
representation of a cluster with rabbits. Reads from a
rabbitmapping file as generated by :man1:`flux-rabbitmapping`, which
must be passed as an argument if it is not given by the
``rabbit.mapping`` Flux config key.

Reads in RFC 20 R from stdin and outputs the same R to stdout after
augmenting it with a new ``scheduling`` key.


OPTIONS
=======

.. option:: --no-validate

  Do not throw an error if nodes are found in the rabbitmapping file
  that are not specified by the R passed to stdin.

.. option:: -c, --chunks-per-nnf=N

  The number of ways to split a rabbit for Flux scheduling.
  Higher numbers allow finer-grained scheduling at the possible cost
  of scheduler performance. Leave unspecified for a default value.

.. option:: --cluster-name=NAME

  The name of the cluster to build the JGF for. If unspecified, the
  current hostname is stripped of numerals and used.

.. option:: --only-sched

  Only output the value of the ``scheduling`` key.

.. option:: --from-config=PATH

  Do not expect R on stdin; instead, generate JGF based on a
  Flux config TOML file containing a resource.config table.


EXAMPLES
========

Replace an R file with a new augmented one:

::

  cat /etc/flux/system/R | flux dws2jgf /etc/flux/system/rabbitmapping > /tmp/JGF &&
  mv /tmp/JGF /etc/flux/system/R


FLUX RFC
========

:doc:`rfc:spec_20`


SEE ALSO
========

:man1:`flux-rabbitmapping`.
